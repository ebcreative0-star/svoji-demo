---
phase: 02-ui-primitives
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - src/components/sections/Hero.tsx
  - src/components/sections/RSVP.tsx
  - src/components/dashboard/BudgetView.tsx
  - src/components/dashboard/GuestsView.tsx
  - src/components/dashboard/ChecklistView.tsx
  - src/components/dashboard/ChatInterface.tsx
  - src/components/dashboard/DashboardNav.tsx
  - src/app/page.tsx
  - src/app/(auth)/login/page.tsx
  - src/app/(auth)/register/page.tsx
  - src/app/(auth)/onboarding/page.tsx
  - src/app/globals.css
autonomous: true
requirements: [PRIM-01, PRIM-02, PRIM-03, PRIM-04]

must_haves:
  truths:
    - "No .btn-primary or .btn-outline CSS class strings remain anywhere in src/ (grep returns zero matches outside globals.css)"
    - "Every <button> element in dashboard views uses the Button component from @/components/ui"
    - "Card-pattern divs (bg-white p-4 rounded-lg shadow-sm) in dashboard views use the Card component"
    - "RSVP form inputs use base Input/Textarea/Select components (keeping register spread, NOT switching to FormX)"
    - "Badge spans in GuestsView, ChecklistView, BudgetView use the Badge component with semantic intents"
    - "All pages render without visual regressions -- same layout, colors, and behavior as before migration"
    - "The .btn-primary and .btn-outline CSS class definitions are removed from globals.css"
  artifacts:
    - path: "src/app/globals.css"
      provides: "Cleaned CSS without btn-* classes"
      contains: "No .btn-primary or .btn-outline"
  key_links:
    - from: "src/components/dashboard/GuestsView.tsx"
      to: "src/components/ui/Badge.tsx"
      via: "import { Badge }"
      pattern: "import.*Badge.*@/components/ui"
    - from: "src/components/sections/RSVP.tsx"
      to: "src/components/ui/Input.tsx"
      via: "import { Input }"
      pattern: "import.*Input.*@/components/ui"
    - from: "src/components/dashboard/BudgetView.tsx"
      to: "src/components/ui/Button.tsx"
      via: "import { Button }"
      pattern: "import.*Button.*@/components/ui"
---

<objective>
Migrate all existing raw button, card-div, input, and badge patterns across the codebase to use the new UI primitives from plan 01. Remove legacy .btn-primary/.btn-outline CSS classes from globals.css after all usages are replaced.

Purpose: Complete the "replace all one-off CSS class usage" goal of Phase 2. After this plan, the typed primitives are the only way UI elements render -- no legacy patterns remain.

Output: All 11 source files migrated, globals.css cleaned of legacy button classes.
</objective>

<execution_context>
@/Users/eb-vm/.claude/get-shit-done/workflows/execute-plan.md
@/Users/eb-vm/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-ui-primitives/02-CONTEXT.md
@.planning/phases/02-ui-primitives/02-RESEARCH.md
@.planning/phases/02-ui-primitives/02-01-SUMMARY.md
@src/components/ui/index.ts
@src/components/ui/Button.tsx
@src/components/ui/Card.tsx
@src/components/ui/Input.tsx
@src/components/ui/Textarea.tsx
@src/components/ui/Select.tsx
@src/components/ui/Badge.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate btn-primary/btn-outline usages and auth page buttons</name>
  <files>
    src/app/page.tsx,
    src/app/(auth)/login/page.tsx,
    src/app/(auth)/register/page.tsx,
    src/app/(auth)/onboarding/page.tsx,
    src/components/sections/Hero.tsx,
    src/components/sections/RSVP.tsx
  </files>
  <action>
Replace all `btn-primary` and `btn-outline` class usages with the Button component (or equivalent Tailwind classes for non-button elements).

**Migration map (exact locations):**

1. **src/app/page.tsx:107** -- `className="btn-primary !text-base !px-8 !py-4 inline-flex items-center justify-center gap-2"`
   Replace with: `<Button variant="primary" size="lg">` (if it's a button) or apply Button's primary visual classes directly if it's a Link/a element. Check the element type first.

2. **src/app/page.tsx:114** -- `className="btn-outline !text-base !px-8 !py-4"`
   Replace with: `<Button variant="secondary" size="lg">` or equivalent.

3. **src/app/page.tsx:300** -- `className="btn-primary !text-base !px-8 !py-4 inline-flex items-center gap-2"`
   Replace with: `<Button variant="primary" size="lg">`.

4. **src/app/(auth)/login/page.tsx:100** -- `className="w-full btn-primary !py-4 flex items-center justify-center gap-2 mt-6"`
   Replace with: `<Button variant="primary" size="lg" className="w-full mt-6">`. If it has a Loader2 + disabled pattern, use `isLoading` prop instead.

5. **src/app/(auth)/register/page.tsx:116** -- `className="w-full btn-primary flex items-center justify-center gap-2"`
   Replace with: `<Button variant="primary" className="w-full">`. Use `isLoading` if loading pattern exists.

6. **src/app/(auth)/onboarding/page.tsx:278** -- `className="flex-1 btn-outline"`
   Replace with: `<Button variant="secondary" className="flex-1">`.

7. **src/app/(auth)/onboarding/page.tsx:288** -- `className="flex-1 btn-primary"`
   Replace with: `<Button variant="primary" className="flex-1">`.

8. **src/app/(auth)/onboarding/page.tsx:297** -- `className="flex-1 btn-primary flex items-center justify-center gap-2"`
   Replace with: `<Button variant="primary" className="flex-1">`. Use `isLoading` if Loader2 present.

9. **src/components/sections/Hero.tsx:87** -- `<a href="#rsvp" className="btn-primary">`
   This is an `<a>` element, not a `<button>`. Do NOT wrap in Button component. Instead, apply the primary button visual classes directly: `className="inline-flex items-center justify-center gap-2 font-medium rounded-full text-base px-7 py-3.5 min-h-[52px] bg-[var(--color-primary)] text-white hover:bg-[var(--color-primary-light)] transition-colors focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[var(--color-primary)]"`. Per 02-RESEARCH.md open question 1: do NOT implement asChild for Phase 2.

10. **src/components/sections/RSVP.tsx:221** -- `className="w-full btn-primary flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed"`
    Check element type. If it's a `<button>`, replace with `<Button variant="primary" className="w-full" isLoading={isSubmitting}>`. The `disabled:opacity-70 disabled:cursor-not-allowed` pattern is handled by Button's built-in disabled styles.

**For each file:**
- Add `import { Button } from '@/components/ui'` at the top.
- If the element already uses Loader2 + disabled for loading state, replace with Button's `isLoading` prop and remove the manual Loader2 import if no longer needed.
- Keep all existing onClick handlers, form submission handlers, and other props.
- Preserve any `className` additions that are layout-specific (w-full, mt-6, flex-1) by passing them via `className` prop on Button.

**Important:** Do NOT touch any raw `<button>` elements in this task -- those are handled in Task 2. This task ONLY handles `btn-primary`/`btn-outline` class replacements and auth page buttons.
  </action>
  <verify>
    <automated>cd /Users/eb-vm/Documents/claw/wedding-web/svoji && grep -r "btn-primary\|btn-outline" src/ --include="*.tsx" --include="*.ts" | grep -v globals.css | grep -v node_modules; echo "Exit: $?"</automated>
  </verify>
  <done>Zero matches for btn-primary or btn-outline in any .tsx/.ts file (excluding globals.css). All replaced elements render with Button component or equivalent Tailwind classes. Loading states use isLoading prop where applicable.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate dashboard buttons, cards, inputs, and badges + remove legacy CSS</name>
  <files>
    src/components/dashboard/BudgetView.tsx,
    src/components/dashboard/GuestsView.tsx,
    src/components/dashboard/ChecklistView.tsx,
    src/components/dashboard/ChatInterface.tsx,
    src/components/dashboard/DashboardNav.tsx,
    src/components/sections/RSVP.tsx,
    src/app/globals.css
  </files>
  <action>
Migrate all remaining raw elements to UI primitives. Work file-by-file.

### Dashboard Buttons (~21 raw `<button>` elements)

For each file, read it first to understand context, then:

**DashboardNav.tsx** (~3 buttons):
- Import `{ Button }` from `@/components/ui`.
- Replace raw `<button>` elements with `<Button>`. Match variant to context: navigation toggles are likely `ghost`, the mobile menu toggle is `ghost` with icon-only.
- Keep all existing onClick handlers and conditional classes.

**ChatInterface.tsx** (~2 buttons):
- Send button with Loader2: `<Button variant="primary" isLoading={...} leadingIcon={<Send />}>` or icon-only if no text.
- Other buttons: match variant to context.

**GuestsView.tsx** (~8 buttons):
- Add/remove guest buttons: `<Button variant="primary" size="sm">` for add, `<Button variant="danger" size="sm">` for delete.
- Filter/sort buttons: `<Button variant="ghost" size="sm">`.
- Keep all onClick, disabled, and conditional classes.

**ChecklistView.tsx** (~3 buttons):
- Toggle/filter buttons: `<Button variant="ghost" size="sm">`.
- Keep existing handlers.

**BudgetView.tsx** (~5 buttons):
- Add item: `<Button variant="primary" size="sm">`.
- Delete item: `<Button variant="danger" size="sm">` or `<Button variant="ghost" size="sm">` with trash icon.
- Keep existing handlers.

**Important button migration rules:**
- Read each file to determine the right variant/size. Use context: destructive actions = danger, primary actions = primary, secondary/filter = ghost or secondary, icon-only = ghost with aria-label.
- Preserve ALL existing event handlers (onClick, onSubmit, type="submit").
- Preserve ALL conditional disabled states.
- If a button already has Loader2 + disabled pattern, replace with `isLoading` prop.
- Icon-only buttons MUST have `aria-label`.

### Dashboard Cards (~13 card-pattern divs)

**BudgetView.tsx** (~6 instances):
- Find divs with pattern `bg-white p-4 rounded-lg shadow-sm` or similar.
- Replace with `<Card><Card.Body>content</Card.Body></Card>`.
- If the div has a header section and body section, use `<Card><Card.Header>...</Card.Header><Card.Body>...</Card.Body></Card>`.
- Use `padding="compact"` for dense list/table cards.

**GuestsView.tsx** (~5 instances):
- Same pattern. Replace card-like divs with Card compound component.

**ChecklistView.tsx** (~1 instance):
- Replace card-like div with Card.

**Locations.tsx** (~1 instance from research -- check if it's in scope):
- Skip Locations.tsx for now -- it's a section component, not dashboard. Phase 4 will handle it.

### RSVP.tsx Inputs (~4 form elements)

- Import `{ Input, Textarea, Select }` from `@/components/ui`.
- Replace raw `<input>` elements with `<Input>`. Keep `{...register("fieldName")}` spread (do NOT switch to FormInput -- per 02-RESEARCH.md Pitfall 2).
- Replace raw `<textarea>` with `<Textarea>`.
- Replace raw `<select>` with `<Select>` (children approach -- keep existing `<option>` elements as children).
- Add `label`, `error={errors.fieldName?.message}` props to each.
- Remove manual label `<label>` elements that are now handled by the component's built-in label prop.
- Remove manual error message `<p>` elements that are now handled by the component's built-in error prop.

### Dashboard Badges

**GuestsView.tsx** (RSVP status badges):
- Import `{ Badge }` from `@/components/ui`.
- Create a local mapping constant:
  ```typescript
  const RSVP_INTENT: Record<string, 'success' | 'warning' | 'danger'> = {
    confirmed: 'success',
    pending: 'warning',
    declined: 'danger',
  };
  ```
- Replace inline styled spans with `<Badge intent={RSVP_INTENT[status]} dot size="sm">`.

**ChecklistView.tsx** (priority + category badges):
- Import `{ Badge }` from `@/components/ui`.
- Urgent priority badge (bg-red-100 text-red-700): `<Badge intent="danger" size="sm">`.
- Category badges (currently using inline style with CATEGORY_COLORS hex): Create mapping:
  ```typescript
  const CATEGORY_INTENT: Record<TaskCategory, 'success' | 'warning' | 'danger' | 'info' | 'neutral'> = {
    venue: 'info',
    attire: 'neutral',
    vendors: 'warning',
    guests: 'success',
    decor: 'info',
    admin: 'neutral',
    ceremony: 'danger',
  };
  ```
- Replace inline-styled category spans with `<Badge intent={CATEGORY_INTENT[category]} size="sm">`.

**BudgetView.tsx** (category display):
- Same CATEGORY_INTENT mapping pattern if category badges exist.

### Final: Remove legacy CSS from globals.css

After ALL above migrations are complete:
- Remove the entire `.btn-primary` block (lines ~107-139 in globals.css).
- Remove the entire `.btn-outline` block (lines ~141-170 in globals.css).
- Remove the mobile media query block for `.btn-primary, .btn-outline` (lines ~173-176).
- Leave all other CSS intact.

### Migration order within this task:
1. Dashboard buttons (all 5 files)
2. Dashboard cards (BudgetView, GuestsView, ChecklistView)
3. RSVP inputs
4. Dashboard badges
5. Remove globals.css legacy CSS
6. Run `npx tsc --noEmit` to verify
  </action>
  <verify>
    <automated>cd /Users/eb-vm/Documents/claw/wedding-web/svoji && npx tsc --noEmit 2>&1 | head -30 && echo "---" && grep -r "btn-primary\|btn-outline" src/ --include="*.tsx" --include="*.ts" --include="*.css" | grep -v node_modules; echo "Exit: $?"</automated>
  </verify>
  <done>
- Zero TypeScript errors.
- Zero matches for btn-primary/btn-outline anywhere in src/ (including globals.css).
- All dashboard button elements use Button component from @/components/ui.
- All card-pattern divs in dashboard use Card compound component.
- RSVP form fields use Input/Textarea/Select with register spread and error props.
- All status badges use Badge component with semantic intents.
- globals.css no longer contains .btn-primary or .btn-outline definitions.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>All UI primitives created and migrated across the entire codebase. Button, Card, Input/Textarea/Select, and Badge components replace all legacy patterns. btn-primary/btn-outline CSS classes removed.</what-built>
  <how-to-verify>
1. Run `npm run dev` and open http://localhost:3000
2. Check landing page (/) -- hero buttons, CTA buttons should look styled (not unstyled)
3. Check /login and /register -- form buttons should be styled
4. Check /onboarding -- back/next/finish buttons should be styled
5. Navigate to dashboard -- check that:
   - Budget view cards have consistent borders/shadows
   - Guest list RSVP badges show colored pills (green=confirmed, amber=pending, red=declined)
   - Checklist category badges show colored pills
   - All action buttons (add, delete, filter) are styled
6. Check RSVP section (#rsvp on landing page) -- form inputs should have labels, focus rings, and the submit button should be styled
7. Verify no unstyled/broken elements -- look for plain text buttons or missing backgrounds
  </how-to-verify>
  <resume-signal>Type "approved" or describe visual issues found</resume-signal>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` -- zero TypeScript errors
2. `npm run build` -- Next.js production build succeeds
3. `grep -r "btn-primary\|btn-outline" src/` -- zero matches
4. `grep -r "import.*from '@/components/ui'" src/` -- confirms imports exist in all migrated files
5. Visual check of all pages confirms no unstyled elements
</verification>

<success_criteria>
- Zero btn-primary/btn-outline usages remain in any source file
- Zero raw `<button>` elements remain in dashboard views (all use Button component)
- Card-pattern divs in dashboard replaced with Card compound component
- RSVP form fields use Input/Textarea/Select base components with register spread
- Badge component used for all status indicators in dashboard
- globals.css cleaned of legacy button class definitions
- TypeScript compilation passes
- Next.js build succeeds
- Visual checkpoint approved by user
</success_criteria>

<output>
After completion, create `.planning/phases/02-ui-primitives/02-02-SUMMARY.md`
</output>
