---
phase: 01-design-system-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/globals.css
  - src/app/layout.tsx
autonomous: true
requirements:
  - DSGN-01
  - DSGN-02
  - DSGN-03
  - DSGN-04

must_haves:
  truths:
    - "All existing UI surfaces display OKLCH warm-premium colors without any var(--color-*) reference breaking"
    - "Headings render in Cormorant Garamond with Inter body copy"
    - "Spacing tokens (--spacing-page-section, --spacing-content-gap) generate Tailwind utility classes"
    - "A new color reference using @theme variable names resolves correctly in dev server output"
  artifacts:
    - path: "src/app/globals.css"
      provides: "@theme tokens with OKLCH colors, spacing scale, font wiring"
      contains: "@import \"tailwindcss\""
    - path: "src/app/layout.tsx"
      provides: "Cormorant Garamond font loading with latin-ext subset"
      contains: "Cormorant_Garamond"
  key_links:
    - from: "src/app/layout.tsx"
      to: "src/app/globals.css"
      via: "CSS variables --font-heading and --font-body injected on <html> className, consumed by @theme inline"
      pattern: "cormorant\\.variable.*inter\\.variable"
    - from: "src/app/globals.css @theme"
      to: "all TSX files using var(--color-*)"
      via: "CSS variable names kept identical, values changed to OKLCH"
      pattern: "--color-primary.*oklch"
---

<objective>
Migrate the Svoji design system from prototype hex colors and Playfair Display to a production-grade warm-premium OKLCH palette with Cormorant Garamond headings, using Tailwind 4 @theme tokens.

Purpose: Establish the foundational design tokens that propagate to all 196+ existing CSS variable references without touching any TSX files. This is the atomic base that every subsequent phase builds on.
Output: Updated globals.css with @theme tokens and layout.tsx with new font.
</objective>

<execution_context>
@/Users/eb-vm/.claude/get-shit-done/workflows/execute-plan.md
@/Users/eb-vm/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-design-system-foundation/01-RESEARCH.md
@src/app/globals.css
@src/app/layout.tsx

<interfaces>
<!-- Current globals.css structure the executor needs to understand -->
<!-- Lines 1-3: @tailwind base/components/utilities (MUST be replaced) -->
<!-- Lines 15-43: :root block with --color-* hex values and spacing vars -->
<!-- Lines 67-72: h1-h6 font-family referencing Playfair Display fallback -->
<!-- Lines 75-77: .font-serif class referencing Playfair Display fallback -->

<!-- Current layout.tsx structure -->
<!-- Line 2: import { Inter, Playfair_Display } from "next/font/google" -->
<!-- Lines 11-15: playfair = Playfair_Display({ ... }) -->
<!-- Line 47: className={`${inter.variable} ${playfair.variable}`} -->
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate globals.css to Tailwind 4 @theme with OKLCH palette and spacing tokens</name>
  <files>src/app/globals.css</files>
  <action>
Replace the entire top section of globals.css. The migration has 4 parts that MUST all happen in one edit:

**Part A: Replace entry point (line 1-3)**
Replace `@tailwind base; @tailwind components; @tailwind utilities;` with `@import "tailwindcss";`

**Part B: Add @theme inline for font variables**
Add immediately after the import:
```css
@theme inline {
  --font-heading: var(--font-heading);
  --font-body: var(--font-body);
}
```
MUST use `inline` keyword. Without it, Tailwind resolves var() at build time when the next/font variable doesn't exist yet, producing broken empty font-family values.

**Part C: Add @theme block with OKLCH colors and spacing**
Replace the entire `:root` color and spacing section with a `@theme` block using these OKLCH values (keeping existing variable names):
```css
@theme {
  --color-primary: oklch(55% 0.045 55);
  --color-primary-light: oklch(64% 0.040 57);
  --color-primary-dark: oklch(45% 0.038 55);
  --color-secondary: oklch(98.1% 0.012 80);
  --color-accent: oklch(72% 0.055 65);
  --color-accent-rose: oklch(76.5% 0.056 18);
  --color-accent-sage: oklch(75.7% 0.033 134);
  --color-text: oklch(21.8% 0.000 0);
  --color-text-light: oklch(47.5% 0.000 0);
  --color-background: oklch(100% 0 0);
  --color-white: oklch(100% 0 0);
  --color-border: oklch(90.8% 0.012 80);

  --spacing-page-section: 6rem;
  --spacing-page-section-mobile: 4rem;
  --spacing-content-gap: 3rem;
}
```

Note on palette shift: The primary hue moves from ~72 (yellow-brown/mocha) to ~55 (warm gold/champagne range) with slightly reduced chroma (0.053 to 0.045) for a more muted premium feel. All chroma values stay below 0.15, safely within sRGB gamut. This is the "warm premium" direction from the requirements.

**Part D: Keep safe-area-inset vars in :root**
Keep a minimal `:root` block with ONLY the safe-area-inset variables (these use env() which cannot go in @theme):
```css
:root {
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
}
```

**Part E: Update font fallback strings**
In the `h1, h2, h3, h4, h5, h6` rule and `.font-serif` rule, change `'Playfair Display'` to `'Cormorant Garamond'`:
- `font-family: var(--font-heading), 'Cormorant Garamond', Georgia, serif;`

Do NOT remove the design guidelines comment block, the `* { margin: 0; ... }` reset, the `html` rule, or any of the animation/button/utility/accessibility rules below the `:root` block. Only the top 3 lines and the `:root` block change structurally. The heading/font-serif rules get a string replacement only.

Also update the `.section-padding` utility to reference the new @theme token name:
- Change `padding: var(--section-padding) 1.5rem;` to `padding: var(--spacing-page-section) 1.5rem;`
  </action>
  <verify>
    <automated>cd /Users/eb-vm/Documents/claw/wedding-web/svoji && npx next build 2>&1 | tail -20</automated>
  </verify>
  <done>globals.css uses @import "tailwindcss" entry point, @theme inline for fonts, @theme for OKLCH colors and spacing tokens, :root only for safe-area env() vars, heading fallbacks reference Cormorant Garamond</done>
</task>

<task type="auto">
  <name>Task 2: Swap Playfair Display for Cormorant Garamond in layout.tsx</name>
  <files>src/app/layout.tsx</files>
  <action>
Three changes in layout.tsx:

1. **Change the import** (line 2):
   Replace `import { Inter, Playfair_Display } from "next/font/google";`
   With `import { Inter, Cormorant_Garamond } from "next/font/google";`

2. **Change the font config** (lines 11-15):
   Replace the `playfair` const with:
   ```tsx
   const cormorant = Cormorant_Garamond({
     subsets: ["latin", "latin-ext"],
     variable: "--font-heading",
     weight: ["300", "400", "500", "600", "700"],
     display: "swap",
   });
   ```
   Key differences from Playfair:
   - Name is `Cormorant_Garamond` (underscore, not hyphen) per next/font convention
   - Explicit `weight` array needed because Cormorant Garamond is NOT a variable font in next/font's data, it requires explicit weights
   - `subsets: ["latin", "latin-ext"]` is critical for Czech diacritics (á, č, ě, ř, š, ž, ů)
   - Variable name stays `--font-heading` (same CSS variable, new font)

3. **Update the className** (line 47):
   Replace `${playfair.variable}` with `${cormorant.variable}`
   Result: `className={\`${inter.variable} ${cormorant.variable}\`}`

Do NOT change anything else in layout.tsx. Metadata, viewport config, and the body/children structure stay identical.
  </action>
  <verify>
    <automated>cd /Users/eb-vm/Documents/claw/wedding-web/svoji && npx next build 2>&1 | tail -20</automated>
  </verify>
  <done>layout.tsx imports and configures Cormorant_Garamond with weights 300-700, latin-ext subset, and --font-heading CSS variable. Build succeeds with no errors.</done>
</task>

</tasks>

<verification>
After both tasks complete:

1. `npx next build` completes without errors
2. Inspect generated CSS (run dev server, check browser DevTools):
   - `:root` contains `--color-primary: oklch(55% 0.045 55)` (not hex)
   - `--font-heading` resolves to Cormorant Garamond font stack
   - `--spacing-page-section` exists as a CSS variable
3. All existing `var(--color-*)` references in TSX files still resolve (no broken colors)
4. `bg-primary`, `text-primary` Tailwind utility classes are generated from @theme
</verification>

<success_criteria>
- Build passes with zero errors
- All 12 color tokens defined in @theme with OKLCH values
- 3 spacing tokens defined in @theme generating utility classes
- Font variables wired via @theme inline
- Cormorant Garamond loaded with weights 300-700 and latin-ext
- No Playfair Display references remain in globals.css or layout.tsx
- Safe-area-inset vars remain in :root (not @theme)
- All existing var(--color-*) references in TSX continue to work without changes
</success_criteria>

<output>
After completion, create `.planning/phases/01-design-system-foundation/01-01-SUMMARY.md`
</output>
