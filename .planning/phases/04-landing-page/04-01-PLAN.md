---
phase: 04-landing-page
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/Button.tsx
  - src/components/landing/LandingNav.tsx
  - src/components/landing/Hero.tsx
  - src/components/landing/LandingFooter.tsx
  - src/app/(public)/page.tsx
autonomous: true
requirements:
  - LAND-01
  - LAND-06
  - LAND-07

must_haves:
  truths:
    - "Navigation bar is transparent over the hero and transitions to white+blur+shadow on scroll past 60px"
    - "Mobile hamburger menu toggles open/closed with animated slide-down panel containing auth links"
    - "Hero section fills the viewport (min-h-[100dvh]) with animated chat messages appearing sequentially"
    - "Grain texture is visible as subtle paper noise over the hero background"
    - "Floating stats card renders on desktop beside the chat mockup"
    - "Footer shows Svoji logo and copyright line with warm brand styling"
    - "All CTA links use buttonVariants() for consistent styling"
  artifacts:
    - path: "src/components/landing/LandingNav.tsx"
      provides: "Scroll-aware nav with mobile menu"
    - path: "src/components/landing/Hero.tsx"
      provides: "100dvh hero with animated chat + grain texture"
    - path: "src/components/landing/LandingFooter.tsx"
      provides: "Brand footer for landing page"
    - path: "src/components/ui/Button.tsx"
      provides: "buttonVariants export for Link styling"
  key_links:
    - from: "src/components/landing/LandingNav.tsx"
      to: "src/components/ui/Button.tsx"
      via: "buttonVariants import for CTA link styling"
      pattern: "buttonVariants"
    - from: "src/components/landing/Hero.tsx"
      to: "framer-motion"
      via: "motion.div with per-message delay for chat animation"
      pattern: "animate.*visible.*delay"
    - from: "src/app/(public)/page.tsx"
      to: "src/components/landing/*"
      via: "imports and renders landing components in order"
      pattern: "import.*components/landing"
---

<objective>
Create the landing page shell: scroll-aware navigation, hero section with animated chat mockup and grain texture, footer, and refactor page.tsx to a clean composition of imported components.

Purpose: Establish the core visual impact (hero) and structural frame (nav + footer) that all other sections sit within. Export buttonVariants so all CTA links share consistent styling.
Output: LandingNav.tsx, Hero.tsx, LandingFooter.tsx created; page.tsx refactored to import components; buttonVariants exported from Button.tsx.
</objective>

<execution_context>
@/Users/eb-vm/.claude/get-shit-done/workflows/execute-plan.md
@/Users/eb-vm/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-landing-page/04-CONTEXT.md
@.planning/phases/04-landing-page/04-RESEARCH.md

@src/app/(public)/page.tsx
@src/components/ui/Button.tsx
@src/components/ui/Card.tsx
@src/components/animation/ScrollReveal.tsx
@src/components/animation/StaggerContainer.tsx
@src/app/globals.css

<interfaces>
<!-- Key types and contracts the executor needs. -->

From src/components/ui/Button.tsx:
```typescript
// buttonVariants is defined but NOT exported -- Task 1 adds the export
const buttonVariants = cva('inline-flex items-center justify-center gap-2 font-medium rounded-full transition-colors focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[var(--color-primary)] disabled:opacity-50 disabled:cursor-not-allowed select-none', {
  variants: {
    variant: { primary: '...', secondary: '...', ghost: '...', danger: '...' },
    size: { sm: '...', md: '...', lg: '...' },
  },
  defaultVariants: { variant: 'primary', size: 'md' },
});
export interface ButtonProps extends Omit<ButtonHTMLAttributes<HTMLButtonElement>, MotionConflicts>, VariantProps<typeof buttonVariants> { ... }
export const Button = forwardRef<HTMLButtonElement, ButtonProps>(...);
```

From src/components/animation/ScrollReveal.tsx:
```typescript
interface ScrollRevealProps { children: ReactNode; delay?: number; className?: string; }
export function ScrollReveal({ children, delay = 0, className }: ScrollRevealProps);
// Uses whileInView="visible" with viewport once:true, margin -80px
```

From src/lib/cn.ts:
```typescript
export function cn(...inputs: ClassValue[]): string;
```

Available CSS tokens (from globals.css @theme):
```
--color-primary, --color-primary-light, --color-primary-dark
--color-secondary (warm off-white -- hero bg)
--color-accent-rose, --color-accent-sage
--color-text, --color-text-light
--color-border
```
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Export buttonVariants and create LandingNav + LandingFooter</name>
  <files>src/components/ui/Button.tsx, src/components/landing/LandingNav.tsx, src/components/landing/LandingFooter.tsx</files>
  <action>
**Button.tsx change (one line):**
Add `export { buttonVariants };` at the bottom of Button.tsx (after the Button component). This lets Link elements import variant classes directly.

**LandingNav.tsx -- scroll-aware navigation with mobile menu:**

Create `src/components/landing/LandingNav.tsx` as a `'use client'` component.

Structure:
- `useState` for `isScrolled` (boolean) and `isMenuOpen` (boolean)
- `useEffect` with `window.addEventListener('scroll', ...)` using `{ passive: true }`. Set `isScrolled = window.scrollY > 60`. Clean up on unmount.
- Fixed `<nav>` at top with `z-50`. When `isScrolled`: `bg-white/95 backdrop-blur-md shadow-sm border-b border-[var(--color-border)]`. When not scrolled: `bg-transparent`. Use `transition-all duration-300` for smooth change.
- Inner container: `max-w-7xl mx-auto px-4 sm:px-6 lg:px-8`, flex row, `h-16` (same as current).
- Left: Logo link -- `<Link href="/">` with Heart icon + "Svoji" text in font-serif, colored `text-[var(--color-primary)]`. When not scrolled, use `text-white` for logo (it's over the warm hero bg -- actually the hero bg is `--color-secondary` which is off-white, so keep `text-[var(--color-primary)]` always).
- Right (desktop, `hidden sm:flex`): "Prihlasit se" as `<Link href="/login">` with `text-sm text-[var(--color-text-light)] hover:text-[var(--color-primary)]` and min-h-[44px]. "Zacit zdarma" as `<Link href="/register" className={buttonVariants({ variant: 'primary', size: 'md' })}>`.
- Right (mobile, `sm:hidden`): Hamburger button with `min-h-[44px] min-w-[44px]`, toggles `isMenuOpen`. Use `Menu` / `X` icons from lucide-react. `aria-label` and `aria-expanded` for a11y.
- Below nav bar (mobile panel): `AnimatePresence` wrapping conditional `motion.div` with slide-down animation (`initial={{ opacity: 0, y: -8 }}`, `animate={{ opacity: 1, y: 0 }}`, `exit={{ opacity: 0, y: -8 }}`). Contains both links stacked vertically with padding. Each link calls `setIsMenuOpen(false)` on click.

Imports: `useState, useEffect` from react, `Link` from next/link, `Heart, Menu, X` from lucide-react, `AnimatePresence, motion` from framer-motion, `buttonVariants` from `@/components/ui/Button`, `cn` from `@/lib/cn`.

**LandingFooter.tsx -- simple brand footer:**

Create `src/components/landing/LandingFooter.tsx`. NOT a `'use client'` component (no interactivity needed -- can be server component).

Structure:
- `<footer>` with `py-12 border-t border-[var(--color-border)]`
- `max-w-7xl mx-auto px-4 sm:px-6 lg:px-8`
- Flex row (sm:flex-row, flex-col on mobile) with items-center justify-between gap-4
- Left: Heart icon + "Svoji" in font-serif, `text-[var(--color-primary)]`
- Right: Copyright text `{new Date().getFullYear()} Svoji. Vytvořeno s láskou v Česku.` in `text-sm text-[var(--color-text-light)]`

Note: `new Date().getFullYear()` in a Server Component is fine -- it evaluates at build/request time.

Imports: `Heart` from lucide-react, `Link` from next/link.
  </action>
  <verify>
    <automated>cd /Users/eb-vm/Documents/claw/wedding-web/svoji && npx tsc --noEmit --pretty 2>&1 | head -30</automated>
  </verify>
  <done>buttonVariants is exported from Button.tsx. LandingNav.tsx renders a scroll-aware fixed nav with hamburger mobile menu. LandingFooter.tsx renders logo + copyright.</done>
</task>

<task type="auto">
  <name>Task 2: Create Hero section with animated chat and grain texture, refactor page.tsx</name>
  <files>src/components/landing/Hero.tsx, src/app/(public)/page.tsx</files>
  <action>
**Hero.tsx -- full-viewport hero with animated chat mockup and grain texture:**

Create `src/components/landing/Hero.tsx` as a `'use client'` component.

Layout approach: Single-column centered hero (per RESEARCH.md recommendation and reference sites reflow.ai/jace.ai). Content stacked vertically: badge > headline > subheadline > dual CTA > chat mockup below.

Structure:
- Outer `<section>` with `relative min-h-[100dvh] flex items-center justify-center overflow-hidden bg-[var(--color-secondary)]`. Use `min-h-[100dvh]` (dynamic viewport height) to avoid iOS Safari 100vh clipping. Add `pt-20` for nav clearance.

- **Grain texture overlay:** A `<div aria-hidden="true">` with `absolute inset-0 pointer-events-none` and inline style:
  ```
  opacity: 0.04,
  backgroundImage: `url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E")`,
  backgroundRepeat: 'repeat',
  ```
  Use `baseFrequency='0.65'` (coarser grain, reads as paper, not TV static on mobile).

- **Content container:** `relative z-10 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center`.

- **Badge:** `inline-flex items-center gap-2 bg-white/80 backdrop-blur-sm px-4 py-2 rounded-full mb-8` with Sparkles icon + "AI-powered svatebni planovani" text.

- **Headline:** `<h1>` with `text-4xl sm:text-5xl lg:text-6xl font-serif mb-6 leading-[1.1] tracking-tight`. Text: "Naplánujte svatbu" / line break / `<span className="text-[var(--color-primary)]">bez stresu</span>`.

- **Subheadline:** `<p>` with `text-lg lg:text-xl text-[var(--color-text-light)] mb-10 max-w-lg mx-auto leading-relaxed`. Text: "Váš osobní AI asistent, který zná české tradice, ceny a pomůže vám s každým detailem."

- **Dual CTA:** Flex row centered with gap-4. Primary: `<Link href="/register" className={buttonVariants({ variant: 'primary', size: 'lg' })}>` with "Vyzkoušet zdarma" + ArrowRight icon. Secondary: `<Link href="/login" className={buttonVariants({ variant: 'secondary', size: 'lg' })}>` with "Přihlásit se".

- **Social proof nudge** below CTAs: `<p className="mt-4 text-sm text-[var(--color-text-light)]">Přidalo se 500+ párů · Zdarma · Bez karty</p>`

- **Chat mockup** below CTAs (mt-12 or mt-16):
  - Container: `relative max-w-md mx-auto`
  - Mockup card: `bg-white rounded-3xl shadow-2xl border border-[var(--color-border)] overflow-hidden`
  - Browser bar: same as current (gray-50 bg, 3 dots, url text)
  - Chat messages: array of 4 messages with `id`, `from` ('user' | 'ai'), `text`, and `delay` (stagger times: 0.3, 1.0, 2.0, 2.8 seconds).

  Chat animation pattern:
  ```typescript
  const messageVariant = {
    hidden: { opacity: 0, y: 10 },
    visible: { opacity: 1, y: 0 },
  };

  // Each message uses:
  <motion.div
    key={msg.id}
    variants={messageVariant}
    initial="hidden"
    animate="visible"
    transition={{ duration: 0.4, ease: 'easeOut', delay: msg.delay }}
  >
  ```

  Use `initial="hidden" animate="visible"` (NOT whileInView) because the hero is visible on page load.

  Message content (Czech, tykání):
  1. User: "Kolik stojí svatební fotograf v Praze?" (delay: 0.3)
  2. AI: "Ceny se pohybují mezi 15-40 tisíci Kč. Pro Prahu doporučuji počítat s 25-30 tisíci." (delay: 1.0)
  3. User: "A co videograf?" (delay: 2.0)
  4. AI: "Videograf vyjde na 20-50 tisíc Kč. Tip: některé studia nabízejí balíček foto + video se slevou." (delay: 2.8)

  User messages: bubble with `bg-[var(--color-secondary)] rounded-2xl rounded-tl-sm px-4 py-3`, avatar circle with "Vy".
  AI messages: bubble with `bg-gray-50 rounded-2xl rounded-tl-sm px-4 py-3`, avatar circle with Sparkles icon on `bg-[var(--color-primary)]`.

- **Floating stats card** (desktop only, `hidden lg:block`): Position `absolute -right-4 bottom-16` on the chat mockup container. Same content as current: CheckSquare icon + "8/10 úkolů" / "Tento měsíc".

- Wrap the entire content section (NOT the grain overlay) in `<ScrollReveal>` for a subtle entrance fade.

**page.tsx refactor:**

Replace the entire content of `src/app/(public)/page.tsx` with a clean composition:

```typescript
import { LandingNav } from '@/components/landing/LandingNav';
import { Hero } from '@/components/landing/Hero';
import { LandingFooter } from '@/components/landing/LandingFooter';

export default function LandingPage() {
  return (
    <div className="min-h-screen overflow-x-hidden bg-white">
      <LandingNav />
      <Hero />
      {/* Features, SocialProof, HowItWorks, FinalCTA -- Plan 04-02 */}
      <LandingFooter />
    </div>
  );
}
```

Temporarily comment out the middle sections (Features, SocialProof, HowItWorks, FinalCTA) with a placeholder comment. Plan 04-02 will add them. This keeps the page functional during incremental development. page.tsx becomes a Server Component (no 'use client' directive -- it only imports and renders).

Imports needed in Hero.tsx: `motion` from framer-motion, `Link` from next/link, `ArrowRight, Sparkles, CheckSquare` from lucide-react, `buttonVariants` from `@/components/ui/Button`, `ScrollReveal` from `@/components/animation/ScrollReveal`.
  </action>
  <verify>
    <automated>cd /Users/eb-vm/Documents/claw/wedding-web/svoji && npx tsc --noEmit --pretty 2>&1 | head -30</automated>
  </verify>
  <done>Hero.tsx renders full-viewport hero with grain texture, animated chat messages (sequential appearance via Framer Motion delays), dual CTA with buttonVariants, and floating stats card. page.tsx is a clean Server Component composing LandingNav + Hero + LandingFooter with placeholder for middle sections.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes without errors related to landing components
2. `src/components/landing/` directory contains LandingNav.tsx, Hero.tsx, LandingFooter.tsx
3. `buttonVariants` is exported from Button.tsx (grep confirms)
4. page.tsx imports from `@/components/landing/` and has no inline section markup
5. No `'use client'` directive in page.tsx (Server Component)
6. LandingNav uses `isScrolled` state with passive scroll listener
7. Hero uses `min-h-[100dvh]` (not h-screen or min-h-screen)
8. Chat messages use `animate="visible"` with per-message `delay` (not whileInView)
9. Grain texture uses `baseFrequency='0.65'` at `opacity: 0.04`
</verification>

<success_criteria>
- Navigation transitions from transparent to solid white on scroll
- Mobile hamburger opens a slide-down menu with auth links
- Hero fills viewport with centered content, grain texture overlay, animated chat messages, and floating stats card
- Footer shows Svoji branding and copyright
- All CTA links use buttonVariants for consistent styling
- Page compiles without TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/04-landing-page/04-01-SUMMARY.md`
</output>
